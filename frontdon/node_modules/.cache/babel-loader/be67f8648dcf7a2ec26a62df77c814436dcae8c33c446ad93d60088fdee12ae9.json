{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\frontend\\\\frontdon\\\\src\\\\Table\\\\modifierpassword.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from 'react';\nimport AuthContext from '../session';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UpdatePasswordForm() {\n  _s();\n  const [passwords, setPasswords] = useState({\n    password: '',\n    password_confirm: ''\n  });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  let {\n    authTokens,\n    logout\n  } = useContext(AuthContext);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPasswords(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n\n    // Validation des champs\n    if (passwords.newPassword !== passwords.confirmPassword) {\n      setError(\"Les mots de passe ne correspondent pas.\");\n      return;\n    }\n\n    // Requête vers l'API\n    try {\n      const acces = \"Bearer \" + String(authTokens.token);\n      const response = await fetch(\"http://127.0.0.1:8000/user/\", {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: acces\n        },\n        body: JSON.stringify({\n          password_confirm: passwords.password_confirm,\n          password: passwords.password\n        })\n      });\n      const errorMessage = await response.text();\n      if (!response.ok) {\n        throw new Error(errorMessage || 'Erreur lors de la mise à jour du mot de passe.');\n      }\n      setSuccess(\"Mot de passe mis à jour avec succès.\");\n      setPasswords({\n        password: '',\n        password_confirm: ''\n      });\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Nouveau mot de passe:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: passwords.password,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Confirmer le nouveau mot de passe:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password_confirm\",\n          value: passwords.password_confirm,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Mettre \\xE0 jour le mot de passe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(UpdatePasswordForm, \"jjHeVY6XkrNkn8CvBoJIa1OSYvQ=\");\n_c = UpdatePasswordForm;\nexport default UpdatePasswordForm;\nvar _c;\n$RefreshReg$(_c, \"UpdatePasswordForm\");","map":{"version":3,"names":["React","useState","useContext","AuthContext","jsxDEV","_jsxDEV","UpdatePasswordForm","_s","passwords","setPasswords","password","password_confirm","error","setError","success","setSuccess","authTokens","logout","handleChange","e","name","value","target","prevState","handleSubmit","preventDefault","newPassword","confirmPassword","acces","String","token","response","fetch","method","headers","Authorization","body","JSON","stringify","errorMessage","text","ok","Error","message","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","_c","$RefreshReg$"],"sources":["C:/Users/hp/Desktop/frontend/frontdon/src/Table/modifierpassword.js"],"sourcesContent":["import React, { useState,useContext } from 'react';\r\nimport AuthContext from '../session';\r\nfunction UpdatePasswordForm() {\r\n  const [passwords, setPasswords] = useState({ password: '', password_confirm: '' });\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  let {authTokens,logout} = useContext(AuthContext);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setPasswords(prevState => ({\r\n      ...prevState,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    // Validation des champs\r\n    if (passwords.newPassword !== passwords.confirmPassword) {\r\n      setError(\"Les mots de passe ne correspondent pas.\");\r\n      return;\r\n    }\r\n\r\n    // Requête vers l'API\r\n    try {\r\n        const acces = \"Bearer \" + String(authTokens.token);\r\n        const response = await fetch(\"http://127.0.0.1:8000/user/\", {\r\n          method: \"PUT\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: acces,\r\n          },\r\n          body: JSON.stringify({\r\n            password_confirm: passwords.password_confirm,\r\n            password: passwords.password\r\n          }),\r\n        });\r\n        const errorMessage = await response.text();\r\n      if (!response.ok) {\r\n        throw new Error(errorMessage ||'Erreur lors de la mise à jour du mot de passe.');\r\n      }\r\n\r\n      setSuccess(\"Mot de passe mis à jour avec succès.\");\r\n      setPasswords({  password: '', password_confirm: '' });\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {error && <div className=\"error\">{error}</div>}\r\n      {success && <div className=\"success\">{success}</div>}\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          Nouveau mot de passe:\r\n          <input type=\"password\" name=\"password\" value={passwords.password} onChange={handleChange} />\r\n        </label>\r\n        <label>\r\n          Confirmer le nouveau mot de passe:\r\n          <input type=\"password\" name=\"password_confirm\" value={passwords.password_confirm} onChange={handleChange} />\r\n        </label>\r\n        <button type=\"submit\">Mettre à jour le mot de passe</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UpdatePasswordForm;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAACC,UAAU,QAAQ,OAAO;AAClD,OAAOC,WAAW,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AACrC,SAASC,kBAAkBA,CAAA,EAAG;EAAAC,EAAA;EAC5B,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC;IAAES,QAAQ,EAAE,EAAE;IAAEC,gBAAgB,EAAE;EAAG,CAAC,CAAC;EAClF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC1C,IAAI;IAACe,UAAU;IAACC;EAAM,CAAC,GAAGf,UAAU,CAACC,WAAW,CAAC;EAEjD,MAAMe,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChCb,YAAY,CAACc,SAAS,KAAK;MACzB,GAAGA,SAAS;MACZ,CAACH,IAAI,GAAGC;IACV,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMG,YAAY,GAAG,MAAOL,CAAC,IAAK;IAChCA,CAAC,CAACM,cAAc,CAAC,CAAC;IAClBZ,QAAQ,CAAC,EAAE,CAAC;IACZE,UAAU,CAAC,EAAE,CAAC;;IAEd;IACA,IAAIP,SAAS,CAACkB,WAAW,KAAKlB,SAAS,CAACmB,eAAe,EAAE;MACvDd,QAAQ,CAAC,yCAAyC,CAAC;MACnD;IACF;;IAEA;IACA,IAAI;MACA,MAAMe,KAAK,GAAG,SAAS,GAAGC,MAAM,CAACb,UAAU,CAACc,KAAK,CAAC;MAClD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,6BAA6B,EAAE;QAC1DC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAEP;QACjB,CAAC;QACDQ,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnB3B,gBAAgB,EAAEH,SAAS,CAACG,gBAAgB;UAC5CD,QAAQ,EAAEF,SAAS,CAACE;QACtB,CAAC;MACH,CAAC,CAAC;MACF,MAAM6B,YAAY,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAC5C,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAACH,YAAY,IAAG,gDAAgD,CAAC;MAClF;MAEAxB,UAAU,CAAC,sCAAsC,CAAC;MAClDN,YAAY,CAAC;QAAGC,QAAQ,EAAE,EAAE;QAAEC,gBAAgB,EAAE;MAAG,CAAC,CAAC;IACvD,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,QAAQ,CAACD,KAAK,CAAC+B,OAAO,CAAC;IACzB;EACF,CAAC;EAED,oBACEtC,OAAA;IAAAuC,QAAA,GACGhC,KAAK,iBAAIP,OAAA;MAAKwC,SAAS,EAAC,OAAO;MAAAD,QAAA,EAAEhC;IAAK;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAC7CnC,OAAO,iBAAIT,OAAA;MAAKwC,SAAS,EAAC,SAAS;MAAAD,QAAA,EAAE9B;IAAO;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eACpD5C,OAAA;MAAM6C,QAAQ,EAAE1B,YAAa;MAAAoB,QAAA,gBAC3BvC,OAAA;QAAAuC,QAAA,GAAO,uBAEL,eAAAvC,OAAA;UAAO8C,IAAI,EAAC,UAAU;UAAC/B,IAAI,EAAC,UAAU;UAACC,KAAK,EAAEb,SAAS,CAACE,QAAS;UAAC0C,QAAQ,EAAElC;QAAa;UAAA4B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvF,CAAC,eACR5C,OAAA;QAAAuC,QAAA,GAAO,oCAEL,eAAAvC,OAAA;UAAO8C,IAAI,EAAC,UAAU;UAAC/B,IAAI,EAAC,kBAAkB;UAACC,KAAK,EAAEb,SAAS,CAACG,gBAAiB;UAACyC,QAAQ,EAAElC;QAAa;UAAA4B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvG,CAAC,eACR5C,OAAA;QAAQ8C,IAAI,EAAC,QAAQ;QAAAP,QAAA,EAAC;MAA6B;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV;AAAC1C,EAAA,CApEQD,kBAAkB;AAAA+C,EAAA,GAAlB/C,kBAAkB;AAsE3B,eAAeA,kBAAkB;AAAC,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}